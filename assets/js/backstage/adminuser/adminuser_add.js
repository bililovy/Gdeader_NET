var username=$('input[name="username"]'),email=$('input[name="email"]'),truename=$('input[name="truename"]'),password=$('input[name="password"]'),islock=$('input[name="canbedelete"]'),password2=$('input[name="c_password"]');$(".btn.next").click(function(){var usernameBool=true,emailBool=true,truenameBool=true;if(check_username(username)){setTips(username,"",true);usernameBool=true;}else{usernameBool=false;}if(check_email(email)){setTips(email,"",true);emailBool=true;}else{emailBool=false;}if(check_name(truename)){setTips(truename,"",true);truenameBool=true;}else{truenameBool=false;}if(usernameBool&&emailBool&&truenameBool){$(".add-admin").animate({marginLeft:-720},350);}});$(".btn.prev").click(function(){if($(this).hasClass("posting")){return false;}$(".add-admin").animate({marginLeft:0},350);});$(".btn.add").click(function(){var $this=$(this);if($this.hasClass("posting")){return false;}var data_username=trimValue(username.val()),data_email=trimValue(email.val()),data_truename=trimValue(truename.val()),data_password=trimValue(password.val()),data_canbedelete=trimValue(islock.filter(":checked").val()),data_password2=trimValue(password2.val());if(check_pass(password)){setTips(password,"",true);if(is_same_password(data_password,data_password2)){setTips(password2,"",true);var data={username:data_username,email:data_email,truename:data_truename,canbedelete:data_canbedelete,password:hex_md5(data_password)};prompTip("正在提交中……");$this.addClass("posting");$(".btn.prev").addClass("posting");$(".add-admin :text, .add-admin :password").prop("disabled",true);$.post(adminAddUrl,data,function(back){if(back.status==1){easyDialog.open({container:{header:"金标装饰-提醒窗口",content:"成功增加一位管理员，你可以：<br />前往查看，或者继续增加！",yesFn:function(){$("input:text, input:password").val("");$("input:text, input:password").prop("disabled",false);$(".add-admin").animate({marginLeft:0},350);$this.removeClass("posting");$(".btn.prev").removeClass("posting");prompTip("你可以继续添加",true);},noFn:function(){window.location.href=back.redirecturl;}}});$("#easyDialogYesBtn").text("继续添加");$("#easyDialogNoBtn").text("查看列表");}else{prompTip(back.data,true);$this.removeClass("posting");$(".btn.prev").removeClass("posting");$(".add-admin :text, .add-admin :password").prop("disabled",false);}},"json");}else{setTips(password2,"两次密码不一致");return false;}}});function check_username(o){var val=o.val();if(is_empty(val)){setTips(o,"昵称不能为空");return false;}else{if(has_specialchars(val)){setTips(o,"昵称不允许有特殊字符");return false;}else{if(has_length_error(val,4,15)){setTips(o,"昵称为4-15位字母或数字");return false;}else{if(is_all_numbers(val)){setTips(o,"昵称不能全是数字");return false;}else{if(has_cn(val)){setTips(o,"昵称不能有中文");return false;}else{if(is_same_chars(val)){setTips(o,"不能全用相同字符");return false;}else{return true;}}}}}}}function check_email(o){var val=o.val();if(is_empty(val)){setTips(o,"邮箱不能为空");return false;}else{if(!is_email(val)){setTips(o,"邮箱格式不正确");return false;}else{return true;}}}function check_name(o){var val=o.val();if(is_empty(val)){setTips(o,"姓名不能为空");return false;}else{if(!is_all_cn(val)){setTips(o,"请输入中文姓名");return false;}else{if(has_length_error(val,2,12)){setTips(o,"请输入正确的姓名");return false;}else{return true;}}}}function check_pass(o){var val=o.val();if(is_empty(val)){setTips(o,"密码是登陆凭证，不能为空");return false;}else{if(has_cn(val)){setTips(o,"密码不能有中文字符");return false;}else{if(is_all_numbers(val)){setTips(o,"密码不能只是数字");return false;}else{if(is_same_chars(val)){setTips(o,"密码不能为相同字符");return false;}else{if(has_length_error(val,6,20)){setTips(o,"密码为6-20位，请检查");return false;}else{return true;}}}}}}function setTips(o,tips,isDef){isDef=(isDef==null)?false:true;o.siblings("i").html("");if(isDef){var defTips=o.siblings("i").attr("placeholder");o.siblings("i").text(defTips);}else{o.siblings("i").html('<i style="color: #DD2D28;font-size:15px;padding-right: 5px;" class="fa fa-exclamation-circle"></i><span style="color: #D31B26;">'+tips+"</span>");}}function prompTip(tips,autoClose){autoClose=autoClose==null?false:true;var html='<span id="temp-tip" style="padding: 6px 10px;color: #FFF; border-radius: 5px; font-size:13px; background: #3672A6;position: absolute; left: 200px;top: 120px;">'+tips+"</span>";if($("#temp-tip").length>0){$("#temp-tip").remove();}$("body").append(html);if(autoClose){setTimeout(function(){$("#temp-tip").fadeOut(600,function(){$(this).remove();});},2100);}}